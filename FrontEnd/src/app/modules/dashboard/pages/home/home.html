<div class="bg-neutral-light dark:bg-dark-background text-text-dark dark:text-dark-text min-h-screen w-full font-sans p-4 sm:p-6 lg:p-8">
  <div class="absolute top-0 left-0 w-1/3 h-1/3 bg-primary/20 dark:bg-primary/30 rounded-full filter blur-3xl opacity-50 -translate-x-1/2 -translate-y-1/2"></div>
  <div class="absolute bottom-0 right-0 w-1/3 h-1/3 bg-secondary/20 dark:bg-secondary/30 rounded-full filter blur-3xl opacity-40 translate-x-1/2 translate-y-1/2"></div>

  <main class="relative z-10 max-w-screen-2xl mx-auto">

    <header class="mb-8 animate-fade-in-down">
      <h1 class="text-3xl sm:text-4xl font-extrabold text-primary dark:text-dark-primary">Centro de Comando</h1>
      <p class="mt-1 text-text-dark/60 dark:text-dark-text/60">Resumen operativo de la ferreterÃ­a en tiempo real.</p>
    </header>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

      <div class="lg:col-span-2 space-y-8">
        
        <section class="bg-white/50 dark:bg-dark-card/50 backdrop-blur-xl border border-primary/10 dark:border-dark-border rounded-2xl shadow-lg animate-fade-in-up" style="animation-delay: 200ms;">
          <div class="p-6 border-b border-primary/10 dark:border-dark-border">
            <h2 class="text-xl font-bold text-primary dark:text-dark-primary">Productos con Stock CrÃ­tico</h2>
            <p class="text-sm text-text-dark/60 dark:text-dark-text/60">Estos productos necesitan atenciÃ³n inmediata para evitar quiebres de stock.</p>
          </div>

          <div class="divide-y divide-primary/10 dark:divide-dark-border">
            <div *ngIf="criticalProducts.length === 0" class="p-10 text-center text-text-dark/50 dark:text-dark-text/50">
              <p>ðŸŽ‰ Â¡Excelente! No hay productos con stock crÃ­tico.</p>
            </div>
            
            <div *ngFor="let product of criticalProducts; let i = index" class="product-row group">
              <div class="flex items-center gap-4 flex-grow p-4">
                <div>
                  <p class="font-semibold">{{ product.name }}</p>
                  <p class="text-xs text-text-dark/50 dark:text-dark-text/50">{{ product.category }}</p>
                </div>
              </div>

              <div class="flex items-center gap-6 p-4 shrink-0">
                <div class="text-center">
                  <p class="text-2xl font-bold font-mono" [ngClass]="{
                      'text-danger dark:text-dark-red': product.stock === 0,
                      'text-secondary': product.stock > 0
                    }">{{ product.stock }}</p>
                  <p class="text-xs text-text-dark/50 dark:text-dark-text/50">Unidades</p>
                </div>
                <span class="px-3 py-1 text-xs font-bold rounded-full uppercase tracking-wider" [ngClass]="{
                    'bg-danger/10 text-danger dark:bg-dark-red/20 dark:text-dark-red': product.stock === 0,
                    'bg-secondary/10 text-secondary dark:bg-secondary/20': product.stock > 0
                  }">
                  {{ product.stock === 0 ? 'Agotado' : 'Bajo' }}
                </span>
              </div>

              <div class="p-4">
                <button class="action-button opacity-0 group-hover:opacity-100">
                  <span>Pedir Stock</span>
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </section>
      </div>

      <aside class="space-y-8">
        
        <div class="kpi-card-primary animate-fade-in-up" style="animation-delay: 100ms;">
          <div class="flex justify-between items-center">
            <span class="font-semibold text-white/80">Salidas del DÃ­a</span>
            <div class="bg-white/20 p-2.5 rounded-xl">
              <svg class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01" /></svg>
            </div>
          </div>
          <p class="text-5xl font-bold mt-2 text-white">S/{{ kpi.dailySales.toFixed(2) }}</p>
          <p class="text-sm text-white/60 mt-1">+15% vs ayer</p>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 gap-6">
          <div class="kpi-card-secondary animate-fade-in-up" style="animation-delay: 300ms;">
            <div class="bg-primary/10 dark:bg-dark-primary/20 p-2.5 rounded-xl self-start">
              <svg class="h-6 w-6 text-primary dark:text-dark-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4" /></svg>
            </div>
            <p class="text-3xl font-bold mt-auto">{{ kpi.totalProducts }}</p>
            <p class="text-sm text-text-dark/60 dark:text-dark-text/60">Productos Totales</p>
          </div>
          
          <div class="kpi-card-secondary animate-fade-in-up" style="animation-delay: 400ms;">
            <div class="bg-secondary/10 p-2.5 rounded-xl self-start">
              <svg class="h-6 w-6 text-secondary" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" /></svg>
            </div>
            <p class="text-3xl font-bold mt-auto">{{ kpi.newOrders }}</p>
            <p class="text-sm text-text-dark/60 dark:text-dark-text/60">Nuevos Pedidos</p>
          </div>
        </div>

      </aside>
    </div>
  </main>
</div>